{
  "version": 3,
  "sources": ["../bundle-D7rzNh/checked-fetch.js", "../../../cloudflare-worker.js", "file:///C:/Users/jbair/AppData/Roaming/npm/node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts", "file:///C:/Users/jbair/AppData/Roaming/npm/node_modules/wrangler/templates/middleware/middleware-scheduled.ts", "file:///C:/Users/jbair/AppData/Roaming/npm/node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts", "../bundle-D7rzNh/middleware-insertion-facade.js", "file:///C:/Users/jbair/AppData/Roaming/npm/node_modules/wrangler/templates/middleware/common.ts", "../bundle-D7rzNh/middleware-loader.entry.ts"],
  "sourceRoot": "E:\\Repos\\bitcraftmarkethelper\\.wrangler\\tmp\\dev-e9VKvn",
  "sourcesContent": ["const urls = new Set();\n\nfunction checkURL(request, init) {\n\tconst url =\n\t\trequest instanceof URL\n\t\t\t? request\n\t\t\t: new URL(\n\t\t\t\t\t(typeof request === \"string\"\n\t\t\t\t\t\t? new Request(request, init)\n\t\t\t\t\t\t: request\n\t\t\t\t\t).url\n\t\t\t\t);\n\tif (url.port && url.port !== \"443\" && url.protocol === \"https:\") {\n\t\tif (!urls.has(url.toString())) {\n\t\t\turls.add(url.toString());\n\t\t\tconsole.warn(\n\t\t\t\t`WARNING: known issue with \\`fetch()\\` requests to custom HTTPS ports in published Workers:\\n` +\n\t\t\t\t\t` - ${url.toString()} - the custom port will be ignored when the Worker is published using the \\`wrangler deploy\\` command.\\n`\n\t\t\t);\n\t\t}\n\t}\n}\n\nglobalThis.fetch = new Proxy(globalThis.fetch, {\n\tapply(target, thisArg, argArray) {\n\t\tconst [request, init] = argArray;\n\t\tcheckURL(request, init);\n\t\treturn Reflect.apply(target, thisArg, argArray);\n\t},\n});\n", "/**\r\n * Cloudflare Worker - CORS Proxy + Market Monitor with Durable Objects\r\n *\r\n * This worker:\r\n * 1. Proxies requests to bitjita.com with CORS headers\r\n * 2. Monitors market orders every 5 minutes via cron\r\n * 3. Tracks changes in buy/sell orders\r\n * 4. Provides real-time updates to frontend clients\r\n */\r\n\r\n// Target API endpoint\r\nconst TARGET_API = 'https://bitjita.com';\r\n\r\n// Region ID for Solvenar (used to filter orders)\r\nconst MONITOR_REGION_ID = 4;\r\n\r\n/**\r\n * Durable Object: MarketMonitor\r\n * Stores market state and tracks changes\r\n */\r\nexport class MarketMonitor {\r\n  constructor(state, env) {\r\n    this.state = state;\r\n    this.env = env;\r\n  }\r\n\r\n  /**\r\n   * Handle requests to the Durable Object\r\n   */\r\n  async fetch(request) {\r\n    const url = new URL(request.url);\r\n    const path = url.pathname;\r\n\r\n    if (path === '/api/monitor/state') {\r\n      return this.getState();\r\n    } else if (path === '/api/monitor/changes') {\r\n      const limit = parseInt(url.searchParams.get('limit')) || 50;\r\n      return this.getChanges(limit);\r\n    } else if (path === '/api/monitor/update') {\r\n      const data = await request.json();\r\n      return this.updateState(data.marketData, data.orderDetails || {});\r\n    } else if (path === '/api/monitor/reset') {\r\n      return this.resetState();\r\n    }\r\n\r\n    return new Response('Not found', { status: 404 });\r\n  }\r\n\r\n  /**\r\n   * Get current market state\r\n   */\r\n  async getState() {\r\n    const currentState = await this.state.storage.get('currentState');\r\n    const orderDetails = await this.state.storage.get('orderDetails') || {};\r\n    const lastUpdate = await this.state.storage.get('lastUpdate');\r\n    const changeCount = await this.state.storage.get('changeCount') || 0;\r\n\r\n    return new Response(JSON.stringify({\r\n      currentState: currentState || null,\r\n      orderDetails: orderDetails,\r\n      lastUpdate: lastUpdate || null,\r\n      changeCount: changeCount,\r\n      timestamp: Date.now()\r\n    }), {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get recent changes\r\n   */\r\n  async getChanges(limit = 50) {\r\n    const changes = await this.state.storage.get('changes') || [];\r\n\r\n    return new Response(JSON.stringify({\r\n      changes: changes.slice(-limit),\r\n      total: changes.length,\r\n      timestamp: Date.now()\r\n    }), {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Update state with new market data and detect changes\r\n   * @param {Object} newData - Market data with items array\r\n   * @param {Object} orderDetails - Optional order details keyed by item ID\r\n   */\r\n  async updateState(newData, orderDetails = {}) {\r\n    const previousState = await this.state.storage.get('currentState');\r\n    const previousOrderDetails = await this.state.storage.get('orderDetails') || {};\r\n    const changes = await this.state.storage.get('changes') || [];\r\n    let changeCount = await this.state.storage.get('changeCount') || 0;\r\n\r\n    // Detect changes\r\n    const detectedChanges = this.detectChanges(previousState, newData);\r\n\r\n    if (detectedChanges.length > 0) {\r\n      // Attach order details and diff individual orders\r\n      const changesWithOrders = detectedChanges.map(change => {\r\n        const currentDetails = orderDetails[change.itemId];\r\n        const prevDetails = previousOrderDetails[change.itemId];\r\n\r\n        if (currentDetails) {\r\n          // Diff individual orders to find added/removed\r\n          const orderDiff = this.diffOrders(prevDetails, currentDetails);\r\n\r\n          return {\r\n            ...change,\r\n            orderDetails: {\r\n              sellOrders: currentDetails.sellOrders,\r\n              buyOrders: currentDetails.buyOrders,\r\n              stats: currentDetails.stats\r\n            },\r\n            addedOrders: orderDiff.added,\r\n            removedOrders: orderDiff.removed\r\n          };\r\n        }\r\n        return change;\r\n      });\r\n\r\n      // Add changes to history\r\n      const changeEntry = {\r\n        timestamp: Date.now(),\r\n        changes: changesWithOrders\r\n      };\r\n      changes.push(changeEntry);\r\n\r\n      // Keep only last 1000 change entries\r\n      if (changes.length > 1000) {\r\n        changes.shift();\r\n      }\r\n\r\n      changeCount += detectedChanges.length;\r\n\r\n      // Save to storage\r\n      await this.state.storage.put('changes', changes);\r\n      await this.state.storage.put('changeCount', changeCount);\r\n    }\r\n\r\n    // Update current state and order details\r\n    await this.state.storage.put('currentState', newData);\r\n    await this.state.storage.put('orderDetails', orderDetails);\r\n    await this.state.storage.put('lastUpdate', Date.now());\r\n\r\n    return new Response(JSON.stringify({\r\n      success: true,\r\n      changesDetected: detectedChanges.length,\r\n      totalChanges: changeCount,\r\n      itemsWithOrderDetails: Object.keys(orderDetails).length\r\n    }), {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Diff orders between previous and current state to find added/removed orders\r\n   */\r\n  diffOrders(prevDetails, currentDetails) {\r\n    const added = { sellOrders: [], buyOrders: [] };\r\n    const removed = { sellOrders: [], buyOrders: [] };\r\n\r\n    if (!prevDetails) {\r\n      // All current orders are new\r\n      added.sellOrders = (currentDetails.sellOrders || []).map(order => ({\r\n        claimName: order.claimName,\r\n        claimEntityId: order.claimEntityId,\r\n        ownerName: order.ownerName || order.playerName,\r\n        ownerEntityId: order.ownerEntityId || order.playerEntityId,\r\n        quantity: order.quantity,\r\n        priceThreshold: order.priceThreshold,\r\n        regionId: order.regionId\r\n      }));\r\n      added.buyOrders = (currentDetails.buyOrders || []).map(order => ({\r\n        claimName: order.claimName,\r\n        claimEntityId: order.claimEntityId,\r\n        ownerName: order.ownerName || order.playerName,\r\n        ownerEntityId: order.ownerEntityId || order.playerEntityId,\r\n        quantity: order.quantity,\r\n        priceThreshold: order.priceThreshold,\r\n        regionId: order.regionId\r\n      }));\r\n      return { added, removed };\r\n    }\r\n\r\n    // Create order keys for comparison (claimEntityId + price + type is unique enough)\r\n    const createOrderKey = (order) =>\r\n      `${order.claimEntityId || order.claimName}_${order.priceThreshold}_${order.quantity}`;\r\n\r\n    // Diff sell orders\r\n    const prevSellKeys = new Map();\r\n    (prevDetails.sellOrders || []).forEach(order => {\r\n      prevSellKeys.set(createOrderKey(order), order);\r\n    });\r\n\r\n    const currSellKeys = new Map();\r\n    (currentDetails.sellOrders || []).forEach(order => {\r\n      currSellKeys.set(createOrderKey(order), order);\r\n    });\r\n\r\n    // Find added sell orders\r\n    for (const [key, order] of currSellKeys) {\r\n      if (!prevSellKeys.has(key)) {\r\n        added.sellOrders.push({\r\n          claimName: order.claimName,\r\n          claimEntityId: order.claimEntityId,\r\n          ownerName: order.ownerName || order.playerName,\r\n          ownerEntityId: order.ownerEntityId || order.playerEntityId,\r\n          quantity: order.quantity,\r\n          priceThreshold: order.priceThreshold,\r\n          regionId: order.regionId\r\n        });\r\n      }\r\n    }\r\n\r\n    // Find removed sell orders\r\n    for (const [key, order] of prevSellKeys) {\r\n      if (!currSellKeys.has(key)) {\r\n        removed.sellOrders.push({\r\n          claimName: order.claimName,\r\n          claimEntityId: order.claimEntityId,\r\n          ownerName: order.ownerName || order.playerName,\r\n          ownerEntityId: order.ownerEntityId || order.playerEntityId,\r\n          quantity: order.quantity,\r\n          priceThreshold: order.priceThreshold,\r\n          regionId: order.regionId\r\n        });\r\n      }\r\n    }\r\n\r\n    // Diff buy orders\r\n    const prevBuyKeys = new Map();\r\n    (prevDetails.buyOrders || []).forEach(order => {\r\n      prevBuyKeys.set(createOrderKey(order), order);\r\n    });\r\n\r\n    const currBuyKeys = new Map();\r\n    (currentDetails.buyOrders || []).forEach(order => {\r\n      currBuyKeys.set(createOrderKey(order), order);\r\n    });\r\n\r\n    // Find added buy orders\r\n    for (const [key, order] of currBuyKeys) {\r\n      if (!prevBuyKeys.has(key)) {\r\n        added.buyOrders.push({\r\n          claimName: order.claimName,\r\n          claimEntityId: order.claimEntityId,\r\n          ownerName: order.ownerName || order.playerName,\r\n          ownerEntityId: order.ownerEntityId || order.playerEntityId,\r\n          quantity: order.quantity,\r\n          priceThreshold: order.priceThreshold,\r\n          regionId: order.regionId\r\n        });\r\n      }\r\n    }\r\n\r\n    // Find removed buy orders\r\n    for (const [key, order] of prevBuyKeys) {\r\n      if (!currBuyKeys.has(key)) {\r\n        removed.buyOrders.push({\r\n          claimName: order.claimName,\r\n          claimEntityId: order.claimEntityId,\r\n          ownerName: order.ownerName || order.playerName,\r\n          ownerEntityId: order.ownerEntityId || order.playerEntityId,\r\n          quantity: order.quantity,\r\n          priceThreshold: order.priceThreshold,\r\n          regionId: order.regionId\r\n        });\r\n      }\r\n    }\r\n\r\n    return { added, removed };\r\n  }\r\n\r\n  /**\r\n   * Detect changes between previous and new market states\r\n   */\r\n  detectChanges(previousState, newState) {\r\n    const changes = [];\r\n\r\n    if (!previousState || !previousState.items) {\r\n      return changes; // First run, no changes to detect\r\n    }\r\n\r\n    // Create maps for quick lookup\r\n    const prevMap = new Map();\r\n    previousState.items.forEach(item => {\r\n      prevMap.set(item.id, item);\r\n    });\r\n\r\n    const newMap = new Map();\r\n    newState.items.forEach(item => {\r\n      newMap.set(item.id, item);\r\n    });\r\n\r\n    // Check all items in new state\r\n    for (const newItem of newState.items) {\r\n      const prevItem = prevMap.get(newItem.id);\r\n\r\n      if (!prevItem) {\r\n        // New item with orders appeared\r\n        if (newItem.totalOrders > 0) {\r\n          changes.push({\r\n            type: 'new_item',\r\n            itemId: newItem.id,\r\n            itemName: newItem.name,\r\n            sellOrders: newItem.sellOrders,\r\n            buyOrders: newItem.buyOrders,\r\n            totalOrders: newItem.totalOrders\r\n          });\r\n        }\r\n        continue;\r\n      }\r\n\r\n      // Check for changes in order counts\r\n      const sellOrderChange = newItem.sellOrders - prevItem.sellOrders;\r\n      const buyOrderChange = newItem.buyOrders - prevItem.buyOrders;\r\n      const totalOrderChange = newItem.totalOrders - prevItem.totalOrders;\r\n\r\n      if (sellOrderChange !== 0 || buyOrderChange !== 0 || totalOrderChange !== 0) {\r\n        changes.push({\r\n          type: 'order_change',\r\n          itemId: newItem.id,\r\n          itemName: newItem.name,\r\n          previous: {\r\n            sellOrders: prevItem.sellOrders,\r\n            buyOrders: prevItem.buyOrders,\r\n            totalOrders: prevItem.totalOrders\r\n          },\r\n          current: {\r\n            sellOrders: newItem.sellOrders,\r\n            buyOrders: newItem.buyOrders,\r\n            totalOrders: newItem.totalOrders\r\n          },\r\n          delta: {\r\n            sellOrders: sellOrderChange,\r\n            buyOrders: buyOrderChange,\r\n            totalOrders: totalOrderChange\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    // Check for items that disappeared (no longer have orders)\r\n    for (const prevItem of previousState.items) {\r\n      if (!newMap.has(prevItem.id) && prevItem.totalOrders > 0) {\r\n        changes.push({\r\n          type: 'item_removed',\r\n          itemId: prevItem.id,\r\n          itemName: prevItem.name,\r\n          previous: {\r\n            sellOrders: prevItem.sellOrders,\r\n            buyOrders: prevItem.buyOrders,\r\n            totalOrders: prevItem.totalOrders\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    return changes;\r\n  }\r\n\r\n  /**\r\n   * Reset state (for debugging)\r\n   */\r\n  async resetState() {\r\n    await this.state.storage.deleteAll();\r\n\r\n    return new Response(JSON.stringify({\r\n      success: true,\r\n      message: 'State reset successfully'\r\n    }), {\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * Main Worker\r\n */\r\nexport default {\r\n  /**\r\n   * Handle fetch requests\r\n   */\r\n  async fetch(request, env, ctx) {\r\n    const url = new URL(request.url);\r\n\r\n    // Handle CORS preflight requests\r\n    if (request.method === 'OPTIONS') {\r\n      return handleOptions(request);\r\n    }\r\n\r\n    // Market Monitor API endpoints\r\n    if (url.pathname.startsWith('/api/monitor/')) {\r\n      return handleMonitorRequest(request, env);\r\n    }\r\n\r\n    // Default: CORS proxy to bitjita.com\r\n    return handleProxyRequest(request, env);\r\n  },\r\n\r\n  /**\r\n   * Handle scheduled events (cron)\r\n   */\r\n  async scheduled(event, env, ctx) {\r\n    console.log('Cron triggered at:', new Date(event.scheduledTime).toISOString());\r\n\r\n    try {\r\n      // Fetch current market data (list of items with orders)\r\n      const marketData = await fetchMarketData();\r\n      console.log(`Found ${marketData.items.length} items with orders`);\r\n\r\n      // Get Durable Object instance\r\n      const id = env.MARKET_MONITOR.idFromName('global');\r\n      const stub = env.MARKET_MONITOR.get(id);\r\n\r\n      // Get previous state to detect changes\r\n      const stateResponse = await stub.fetch(new Request('https://dummy/api/monitor/state'));\r\n      const stateData = await stateResponse.json();\r\n      const previousState = stateData.currentState;\r\n      const previousOrderDetails = stateData.orderDetails || {};\r\n\r\n      // Detect which items have changes\r\n      const changedItemIds = detectChangedItemIds(previousState, marketData);\r\n      console.log(`Detected ${changedItemIds.length} changed items`);\r\n\r\n      // Build order details: keep previous data, fetch only changed items\r\n      const allItemIds = marketData.items.map(item => item.id);\r\n      let orderDetails = { ...previousOrderDetails };\r\n\r\n      // Remove items that no longer have orders\r\n      for (const key of Object.keys(orderDetails)) {\r\n        if (!allItemIds.includes(parseInt(key))) {\r\n          delete orderDetails[key];\r\n        }\r\n      }\r\n\r\n      // Fetch order details only for CHANGED items (much faster!)\r\n      if (changedItemIds.length > 0) {\r\n        console.log(`Fetching order details for ${changedItemIds.length} changed items`);\r\n        const changedOrderDetails = await fetchOrdersForItems(changedItemIds);\r\n        // Merge changed items into full order details\r\n        orderDetails = { ...orderDetails, ...changedOrderDetails };\r\n        console.log(`Updated order details for ${Object.keys(changedOrderDetails).length} items`);\r\n      }\r\n\r\n      console.log(`Total order details: ${Object.keys(orderDetails).length} items`);\r\n\r\n      // Update state with market data and order details\r\n      const response = await stub.fetch(new Request('https://dummy/api/monitor/update', {\r\n        method: 'POST',\r\n        body: JSON.stringify({\r\n          marketData: marketData,\r\n          orderDetails: orderDetails\r\n        }),\r\n        headers: { 'Content-Type': 'application/json' }\r\n      }));\r\n\r\n      const result = await response.json();\r\n      console.log('Market update result:', result);\r\n    } catch (error) {\r\n      console.error('Error in scheduled task:', error);\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Handle monitor API requests\r\n */\r\nasync function handleMonitorRequest(request, env) {\r\n  try {\r\n    // Get Durable Object instance (single global instance)\r\n    const id = env.MARKET_MONITOR.idFromName('global');\r\n    const stub = env.MARKET_MONITOR.get(id);\r\n\r\n    // Forward request to Durable Object\r\n    const response = await stub.fetch(request);\r\n\r\n    // Add CORS headers\r\n    const newResponse = new Response(response.body, response);\r\n    addCorsHeaders(newResponse);\r\n\r\n    return newResponse;\r\n  } catch (error) {\r\n    return new Response(JSON.stringify({\r\n      error: 'Monitor API error',\r\n      message: error.message\r\n    }), {\r\n      status: 500,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Access-Control-Allow-Origin': '*',\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * Handle proxy requests to bitjita.com\r\n */\r\nasync function handleProxyRequest(request, env) {\r\n  const url = new URL(request.url);\r\n\r\n  try {\r\n    // Build the target URL\r\n    const targetUrl = TARGET_API + url.pathname + url.search;\r\n\r\n    console.log(`Proxying ${request.method} request to: ${targetUrl}`);\r\n\r\n    // Create new request with same method, headers, and body\r\n    const proxyRequest = new Request(targetUrl, {\r\n      method: request.method,\r\n      headers: request.headers,\r\n      body: request.method !== 'GET' && request.method !== 'HEAD' ? request.body : null,\r\n    });\r\n\r\n    // Forward the request to the target API\r\n    const response = await fetch(proxyRequest);\r\n\r\n    // Create a new response with CORS headers\r\n    const newResponse = new Response(response.body, response);\r\n    addCorsHeaders(newResponse);\r\n\r\n    return newResponse;\r\n\r\n  } catch (error) {\r\n    // Return error with CORS headers\r\n    return new Response(JSON.stringify({\r\n      error: 'Proxy error',\r\n      message: error.message\r\n    }), {\r\n      status: 500,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Access-Control-Allow-Origin': '*',\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * Detect which item IDs have changes between previous and new market states\r\n * (Standalone function for use in cron before updating Durable Object)\r\n */\r\nfunction detectChangedItemIds(previousState, newState) {\r\n  const changedIds = [];\r\n\r\n  if (!previousState || !previousState.items) {\r\n    return changedIds; // First run, no changes to detect\r\n  }\r\n\r\n  // Create maps for quick lookup\r\n  const prevMap = new Map();\r\n  previousState.items.forEach(item => {\r\n    prevMap.set(item.id, item);\r\n  });\r\n\r\n  const newMap = new Map();\r\n  newState.items.forEach(item => {\r\n    newMap.set(item.id, item);\r\n  });\r\n\r\n  // Check all items in new state\r\n  for (const newItem of newState.items) {\r\n    const prevItem = prevMap.get(newItem.id);\r\n\r\n    if (!prevItem) {\r\n      // New item appeared\r\n      if (newItem.totalOrders > 0) {\r\n        changedIds.push(newItem.id);\r\n      }\r\n      continue;\r\n    }\r\n\r\n    // Check for changes in order counts\r\n    const sellOrderChange = newItem.sellOrders - prevItem.sellOrders;\r\n    const buyOrderChange = newItem.buyOrders - prevItem.buyOrders;\r\n    const totalOrderChange = newItem.totalOrders - prevItem.totalOrders;\r\n\r\n    if (sellOrderChange !== 0 || buyOrderChange !== 0 || totalOrderChange !== 0) {\r\n      changedIds.push(newItem.id);\r\n    }\r\n  }\r\n\r\n  // Check for items that disappeared\r\n  for (const prevItem of previousState.items) {\r\n    if (!newMap.has(prevItem.id) && prevItem.totalOrders > 0) {\r\n      changedIds.push(prevItem.id);\r\n    }\r\n  }\r\n\r\n  return changedIds;\r\n}\r\n\r\n/**\r\n * Fetch market data from bitjita API\r\n */\r\nasync function fetchMarketData() {\r\n  // Fetch all items with orders (no claim filter - we'll filter by region instead)\r\n  const apiUrl = `${TARGET_API}/api/market?hasOrders=true`;\r\n\r\n  const response = await fetch(apiUrl);\r\n\r\n  if (!response.ok) {\r\n    throw new Error(`API returned ${response.status}: ${response.statusText}`);\r\n  }\r\n\r\n  const data = await response.json();\r\n\r\n  return {\r\n    items: data.data?.items || [],\r\n    fetchedAt: Date.now()\r\n  };\r\n}\r\n\r\n/**\r\n * Fetch full order details for a specific item\r\n */\r\nasync function fetchItemOrders(itemId) {\r\n  const apiUrl = `${TARGET_API}/api/market/item/${itemId}`;\r\n\r\n  const response = await fetch(apiUrl);\r\n\r\n  if (!response.ok) {\r\n    console.error(`Failed to fetch orders for item ${itemId}: ${response.status}`);\r\n    return null;\r\n  }\r\n\r\n  const data = await response.json();\r\n\r\n  // Filter orders to only include those from the monitored region (Solvenar)\r\n  const sellOrders = (data.sellOrders || []).filter(order => order.regionId === MONITOR_REGION_ID);\r\n  const buyOrders = (data.buyOrders || []).filter(order => order.regionId === MONITOR_REGION_ID);\r\n\r\n  return {\r\n    itemId: itemId,\r\n    sellOrders: sellOrders,\r\n    buyOrders: buyOrders,\r\n    stats: data.stats || {}\r\n  };\r\n}\r\n\r\n/**\r\n * Fetch order details for multiple items (with rate limiting)\r\n * @param {number[]} itemIds - All item IDs that currently have orders\r\n * @param {Object} previousOrderDetails - Previous order details to merge with\r\n */\r\nasync function fetchOrdersForItems(itemIds, previousOrderDetails = {}) {\r\n  // Start with previous order details and update with fresh data\r\n  const results = { ...previousOrderDetails };\r\n\r\n  // Remove items that no longer have orders\r\n  for (const key of Object.keys(results)) {\r\n    if (!itemIds.includes(parseInt(key))) {\r\n      delete results[key];\r\n    }\r\n  }\r\n\r\n  console.log(`Need to fetch ${itemIds.length} items`);\r\n\r\n  // Fetch in batches of 99 (API max is 100) with minimal delay\r\n  const batchSize = 99;\r\n  const delayBetweenBatches = 100; // ms\r\n\r\n  for (let i = 0; i < itemIds.length; i += batchSize) {\r\n    const batch = itemIds.slice(i, i + batchSize);\r\n    const promises = batch.map(id => fetchItemOrders(id));\r\n    const batchResults = await Promise.all(promises);\r\n\r\n    batchResults.forEach(result => {\r\n      if (result) {\r\n        results[result.itemId] = result;\r\n      }\r\n    });\r\n\r\n    // Log progress every 50 items\r\n    if (itemIds.length > 20 && (i + batchSize) % 50 === 0) {\r\n      console.log(`Fetched ${Math.min(i + batchSize, itemIds.length)}/${itemIds.length} items`);\r\n    }\r\n\r\n    // Delay between batches to stay under rate limit\r\n    if (i + batchSize < itemIds.length) {\r\n      await new Promise(resolve => setTimeout(resolve, delayBetweenBatches));\r\n    }\r\n  }\r\n\r\n  return results;\r\n}\r\n\r\n/**\r\n * Add CORS headers to response\r\n */\r\nfunction addCorsHeaders(response) {\r\n  response.headers.set('Access-Control-Allow-Origin', '*');\r\n  response.headers.set('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS');\r\n  response.headers.set('Access-Control-Allow-Headers', 'Content-Type, Authorization');\r\n}\r\n\r\n/**\r\n * Handle CORS preflight OPTIONS requests\r\n */\r\nfunction handleOptions(request) {\r\n  const headers = request.headers;\r\n\r\n  // Make sure the necessary headers are present for this to be a valid pre-flight request\r\n  if (\r\n    headers.get('Origin') !== null &&\r\n    headers.get('Access-Control-Request-Method') !== null &&\r\n    headers.get('Access-Control-Request-Headers') !== null\r\n  ) {\r\n    // Handle CORS preflight request\r\n    return new Response(null, {\r\n      headers: {\r\n        'Access-Control-Allow-Origin': '*',\r\n        'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\r\n        'Access-Control-Allow-Headers': headers.get('Access-Control-Request-Headers'),\r\n        'Access-Control-Max-Age': '86400', // 24 hours\r\n      }\r\n    });\r\n  } else {\r\n    // Handle standard OPTIONS request\r\n    return new Response(null, {\r\n      headers: {\r\n        'Allow': 'GET, POST, PUT, DELETE, OPTIONS',\r\n      }\r\n    });\r\n  }\r\n}\r\n", "import type { Middleware } from \"./common\";\n\nconst drainBody: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} finally {\n\t\ttry {\n\t\t\tif (request.body !== null && !request.bodyUsed) {\n\t\t\t\tconst reader = request.body.getReader();\n\t\t\t\twhile (!(await reader.read()).done) {}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to drain the unused request body.\", e);\n\t\t}\n\t}\n};\n\nexport default drainBody;\n", "import type { Middleware } from \"./common\";\n\n// A middleware has to be a function of type Middleware\nconst scheduled: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\tconst url = new URL(request.url);\n\tif (url.pathname === \"/__scheduled\") {\n\t\tconst cron = url.searchParams.get(\"cron\") ?? \"\";\n\t\tawait middlewareCtx.dispatch(\"scheduled\", { cron });\n\n\t\treturn new Response(\"Ran scheduled event\");\n\t}\n\n\tconst resp = await middlewareCtx.next(request, env);\n\n\t// If you open the `/__scheduled` page in a browser, the browser will automatically make a request to `/favicon.ico`.\n\t// For scheduled Workers _without_ a fetch handler, this will result in a 500 response that clutters the log with unhelpful error messages.\n\t// To avoid this, inject a 404 response to favicon.ico loads on the `/__scheduled` page\n\tif (\n\t\trequest.headers.get(\"referer\")?.endsWith(\"/__scheduled\") &&\n\t\turl.pathname === \"/favicon.ico\" &&\n\t\tresp.status === 500\n\t) {\n\t\treturn new Response(null, { status: 404 });\n\t}\n\n\treturn resp;\n};\n\nexport default scheduled;\n", "import type { Middleware } from \"./common\";\n\ninterface JsonError {\n\tmessage?: string;\n\tname?: string;\n\tstack?: string;\n\tcause?: JsonError;\n}\n\nfunction reduceError(e: any): JsonError {\n\treturn {\n\t\tname: e?.name,\n\t\tmessage: e?.message ?? String(e),\n\t\tstack: e?.stack,\n\t\tcause: e?.cause === undefined ? undefined : reduceError(e.cause),\n\t};\n}\n\n// See comment in `bundle.ts` for details on why this is needed\nconst jsonError: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} catch (e: any) {\n\t\tconst error = reduceError(e);\n\t\treturn Response.json(error, {\n\t\t\tstatus: 500,\n\t\t\theaders: { \"MF-Experimental-Error-Stack\": \"true\" },\n\t\t});\n\t}\n};\n\nexport default jsonError;\n", "\t\t\t\timport worker, * as OTHER_EXPORTS from \"E:\\\\Repos\\\\bitcraftmarkethelper\\\\cloudflare-worker.js\";\n\t\t\t\timport * as __MIDDLEWARE_0__ from \"C:\\\\Users\\\\jbair\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-ensure-req-body-drained.ts\";\nimport * as __MIDDLEWARE_1__ from \"C:\\\\Users\\\\jbair\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-scheduled.ts\";\nimport * as __MIDDLEWARE_2__ from \"C:\\\\Users\\\\jbair\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-miniflare3-json-error.ts\";\n\n\t\t\t\texport * from \"E:\\\\Repos\\\\bitcraftmarkethelper\\\\cloudflare-worker.js\";\n\t\t\t\tconst MIDDLEWARE_TEST_INJECT = \"__INJECT_FOR_TESTING_WRANGLER_MIDDLEWARE__\";\n\t\t\t\texport const __INTERNAL_WRANGLER_MIDDLEWARE__ = [\n\t\t\t\t\t\n\t\t\t\t\t__MIDDLEWARE_0__.default,__MIDDLEWARE_1__.default,__MIDDLEWARE_2__.default\n\t\t\t\t]\n\t\t\t\texport default worker;", "export type Awaitable<T> = T | Promise<T>;\n// TODO: allow dispatching more events?\nexport type Dispatcher = (\n\ttype: \"scheduled\",\n\tinit: { cron?: string }\n) => Awaitable<void>;\n\nexport type IncomingRequest = Request<\n\tunknown,\n\tIncomingRequestCfProperties<unknown>\n>;\n\nexport interface MiddlewareContext {\n\tdispatch: Dispatcher;\n\tnext(request: IncomingRequest, env: any): Awaitable<Response>;\n}\n\nexport type Middleware = (\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tmiddlewareCtx: MiddlewareContext\n) => Awaitable<Response>;\n\nconst __facade_middleware__: Middleware[] = [];\n\n// The register functions allow for the insertion of one or many middleware,\n// We register internal middleware first in the stack, but have no way of controlling\n// the order that addMiddleware is run in service workers so need an internal function.\nexport function __facade_register__(...args: (Middleware | Middleware[])[]) {\n\t__facade_middleware__.push(...args.flat());\n}\nexport function __facade_registerInternal__(\n\t...args: (Middleware | Middleware[])[]\n) {\n\t__facade_middleware__.unshift(...args.flat());\n}\n\nfunction __facade_invokeChain__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tmiddlewareChain: Middleware[]\n): Awaitable<Response> {\n\tconst [head, ...tail] = middlewareChain;\n\tconst middlewareCtx: MiddlewareContext = {\n\t\tdispatch,\n\t\tnext(newRequest, newEnv) {\n\t\t\treturn __facade_invokeChain__(newRequest, newEnv, ctx, dispatch, tail);\n\t\t},\n\t};\n\treturn head(request, env, ctx, middlewareCtx);\n}\n\nexport function __facade_invoke__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tfinalMiddleware: Middleware\n): Awaitable<Response> {\n\treturn __facade_invokeChain__(request, env, ctx, dispatch, [\n\t\t...__facade_middleware__,\n\t\tfinalMiddleware,\n\t]);\n}\n", "// This loads all middlewares exposed on the middleware object and then starts\n// the invocation chain. The big idea is that we can add these to the middleware\n// export dynamically through wrangler, or we can potentially let users directly\n// add them as a sort of \"plugin\" system.\n\nimport ENTRY, { __INTERNAL_WRANGLER_MIDDLEWARE__ } from \"E:\\\\Repos\\\\bitcraftmarkethelper\\\\.wrangler\\\\tmp\\\\bundle-D7rzNh\\\\middleware-insertion-facade.js\";\nimport { __facade_invoke__, __facade_register__, Dispatcher } from \"C:\\\\Users\\\\jbair\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\common.ts\";\nimport type { WorkerEntrypointConstructor } from \"E:\\\\Repos\\\\bitcraftmarkethelper\\\\.wrangler\\\\tmp\\\\bundle-D7rzNh\\\\middleware-insertion-facade.js\";\n\n// Preserve all the exports from the worker\nexport * from \"E:\\\\Repos\\\\bitcraftmarkethelper\\\\.wrangler\\\\tmp\\\\bundle-D7rzNh\\\\middleware-insertion-facade.js\";\n\nclass __Facade_ScheduledController__ implements ScheduledController {\n\treadonly #noRetry: ScheduledController[\"noRetry\"];\n\n\tconstructor(\n\t\treadonly scheduledTime: number,\n\t\treadonly cron: string,\n\t\tnoRetry: ScheduledController[\"noRetry\"]\n\t) {\n\t\tthis.#noRetry = noRetry;\n\t}\n\n\tnoRetry() {\n\t\tif (!(this instanceof __Facade_ScheduledController__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\t// Need to call native method immediately in case uncaught error thrown\n\t\tthis.#noRetry();\n\t}\n}\n\nfunction wrapExportedHandler(worker: ExportedHandler): ExportedHandler {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn worker;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\tconst fetchDispatcher: ExportedHandlerFetchHandler = function (\n\t\trequest,\n\t\tenv,\n\t\tctx\n\t) {\n\t\tif (worker.fetch === undefined) {\n\t\t\tthrow new Error(\"Handler does not export a fetch() function.\");\n\t\t}\n\t\treturn worker.fetch(request, env, ctx);\n\t};\n\n\treturn {\n\t\t...worker,\n\t\tfetch(request, env, ctx) {\n\t\t\tconst dispatcher: Dispatcher = function (type, init) {\n\t\t\t\tif (type === \"scheduled\" && worker.scheduled !== undefined) {\n\t\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\t\tDate.now(),\n\t\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t\t() => {}\n\t\t\t\t\t);\n\t\t\t\t\treturn worker.scheduled(controller, env, ctx);\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn __facade_invoke__(request, env, ctx, dispatcher, fetchDispatcher);\n\t\t},\n\t};\n}\n\nfunction wrapWorkerEntrypoint(\n\tklass: WorkerEntrypointConstructor\n): WorkerEntrypointConstructor {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn klass;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\t// `extend`ing `klass` here so other RPC methods remain callable\n\treturn class extends klass {\n\t\t#fetchDispatcher: ExportedHandlerFetchHandler<Record<string, unknown>> = (\n\t\t\trequest,\n\t\t\tenv,\n\t\t\tctx\n\t\t) => {\n\t\t\tthis.env = env;\n\t\t\tthis.ctx = ctx;\n\t\t\tif (super.fetch === undefined) {\n\t\t\t\tthrow new Error(\"Entrypoint class does not define a fetch() function.\");\n\t\t\t}\n\t\t\treturn super.fetch(request);\n\t\t};\n\n\t\t#dispatcher: Dispatcher = (type, init) => {\n\t\t\tif (type === \"scheduled\" && super.scheduled !== undefined) {\n\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\tDate.now(),\n\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t() => {}\n\t\t\t\t);\n\t\t\t\treturn super.scheduled(controller);\n\t\t\t}\n\t\t};\n\n\t\tfetch(request: Request<unknown, IncomingRequestCfProperties>) {\n\t\t\treturn __facade_invoke__(\n\t\t\t\trequest,\n\t\t\t\tthis.env,\n\t\t\t\tthis.ctx,\n\t\t\t\tthis.#dispatcher,\n\t\t\t\tthis.#fetchDispatcher\n\t\t\t);\n\t\t}\n\t};\n}\n\nlet WRAPPED_ENTRY: ExportedHandler | WorkerEntrypointConstructor | undefined;\nif (typeof ENTRY === \"object\") {\n\tWRAPPED_ENTRY = wrapExportedHandler(ENTRY);\n} else if (typeof ENTRY === \"function\") {\n\tWRAPPED_ENTRY = wrapWorkerEntrypoint(ENTRY);\n}\nexport default WRAPPED_ENTRY;\n"],
  "mappings": "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",
  "names": []
}
